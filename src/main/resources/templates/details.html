<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .movie-poster {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .movie-details {
            padding: 20px;
        }

        .rating {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .section-title {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div id="movie-container" class="row">
        <!-- Movie Details s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y -->
    </div>
</div>

<script>
    const API_KEY = '5b3554c90c5c911c652788f8b65db269';

    // L·∫•y movieId t·ª´ URL
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = urlParams.get('movieId');

    // G·ªçi API l·∫•y th√¥ng tin chi ti·∫øt phim
    const apiUrl = `https://api.themoviedb.org/3/movie/${movieId}?api_key=${API_KEY}&language=en-US&append_to_response=videos`;

    async function fetchMovieDetails() {
        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
                throw new Error('Kh√¥ng th·ªÉ l·∫•y th√¥ng tin phim');
            }

            const movie = await response.json();
            displayMovieDetails(movie);
        } catch (error) {
            console.error('L·ªói khi l·∫•y th√¥ng tin phim:', error);
            document.getElementById('movie-container').innerHTML = '<p class="text-danger">Kh√¥ng th·ªÉ t·∫£i th√¥ng tin phim.</p>';
        }
    }

    // Hi·ªÉn th·ªã th√¥ng tin phim
    function displayMovieDetails(movie) {
        const container = document.getElementById('movie-container');

        // L·∫•y video trailer ƒë·∫ßu ti√™n n·∫øu c√≥
        const trailer = movie.videos?.results.find(video => video.type === "Trailer" && video.site === "YouTube");

        container.innerHTML = `
            <div class="col-md-4">
                <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" class="movie-poster">
            </div>
            <div class="col-md-8 movie-details">
                <h1>${movie.title}</h1>
                <p><strong>Kh·∫©u hi·ªáu:</strong> ${movie.tagline || 'Kh√¥ng c√≥ kh·∫©u hi·ªáu.'}</p>
                <p><strong>Ng√†y ph√°t h√†nh:</strong> ${movie.release_date}</p>
                <p><strong>M√¥ t·∫£:</strong> ${movie.overview || 'Kh√¥ng c√≥ m√¥ t·∫£.'}</p>
                <p class="rating"><strong>ƒê√°nh gi√°:</strong> ${movie.vote_average} / 10 (${movie.vote_count} l∆∞·ª£t)</p>
                <p><strong>Th·ªÉ lo·∫°i:</strong> ${movie.genres.map(genre => genre.name).join(', ')}</p>
                <p><strong>Th·ªùi l∆∞·ª£ng:</strong> ${movie.runtime} ph√∫t</p>
                <p><strong>Ng√¥n ng·ªØ g·ªëc:</strong> ${movie.original_language.toUpperCase()}</p>
                <p><strong>Ng√¥n ng·ªØ s·ª≠ d·ª•ng:</strong> ${movie.spoken_languages.map(lang => lang.english_name).join(', ')}</p>
                <p><strong>Qu·ªëc gia s·∫£n xu·∫•t:</strong> ${movie.production_countries.map(country => country.name).join(', ')}</p>
                <p><strong>C√¥ng ty s·∫£n xu·∫•t:</strong> ${movie.production_companies.map(company => company.name).join(', ')}</p>
                <p><strong>Doanh thu:</strong> $${movie.revenue.toLocaleString()}</p>
                <p><strong>Ng√¢n s√°ch:</strong> $${movie.budget.toLocaleString()}</p>
                <p><strong>Tr·∫°ng th√°i:</strong> ${movie.status}</p>
                <p><strong>Trang web ch√≠nh th·ª©c:</strong>
                    ${movie.homepage ? `<a href="${movie.homepage}" target="_blank">${movie.homepage}</a>` : 'Kh√¥ng c√≥'}
                </p>
                ${trailer ? `<p class="section-title">üé¨ Trailer:</p>
                <iframe width="100%" height="315" src="https://www.youtube.com/embed/${trailer.key}" frameborder="0" allowfullscreen></iframe>` : ''}
            </div>
        `;
    }

    // G·ªçi h√†m l·∫•y d·ªØ li·ªáu khi t·∫£i trang
    fetchMovieDetails();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
